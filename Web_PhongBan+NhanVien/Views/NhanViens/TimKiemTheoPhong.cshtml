@model IEnumerable<Web_PhongBan_NhanVien.Models.NhanVien> 
<!-- Dữ liệu truyền vào View là danh sách các nhân viên thuộc một phòng ban -->

@{
    ViewData["Title"] = "Tìm kiếm nhân viên theo phòng ban";
}

<h2 class="text-primary mb-3">Tìm kiếm nhân viên theo phòng ban</h2>

<!-- Form GET: gửi dữ liệu phongId lên controller -->
<form method="get" asp-action="TimKiemTheoPhong" class="mb-4">
    <div>
        <label for="phongId">Chọn phòng ban:</label>
        
        <!-- DropDownList hiển thị tên các phòng ban -->
        <!-- id="phongId", name="phongId" là tham số truyền lên controller -->
        <!-- asp-items="ViewBag.PhongBans" lấy danh sách từ ViewBag do controller truyền qua -->
        <select id="phongId" name="phongId" asp-items="ViewBag.PhongBans" class="form-control" style="width: 300px; display: inline-block;"></select>
        
        <!-- Nút submit form -->
        <button type="submit" class="btn btn-primary ml-2">Tìm</button>
    </div>
</form>

<!-- Nếu người dùng đã chọn phòng (biến này controller set ViewBag.DaChonPhong = true) -->
@if (ViewBag.DaChonPhong == true)
{
    <!-- Nếu có nhân viên trong phòng -->
    if (Model.Any())
    {
        <h4 class="mb-3">Danh sách nhân viên:</h4>
        
        <!-- Bảng hiển thị danh sách nhân viên -->
        <table class="table table-bordered table-striped">
            <thead class="thead-dark">
                <tr>
                    <th>Họ tên</th>
                    <th>Lương</th>
                    <th>Phòng ban</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var nv in Model)  <!-- Duyệt từng nhân viên -->
                {
                    <tr>
                        <td>@nv.HoTen</td> <!-- Hiển thị họ tên nhân viên -->
                        <td>@nv.Luong.ToString("N0") đ</td> <!-- Hiển thị lương định dạng tiền -->
                        <td>@nv.PhongBan?.TenPhong</td> <!-- Hiển thị tên phòng ban (?. để tránh null) -->
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <!-- Nếu không có nhân viên nào trong phòng ban đã chọn -->
        <div class="alert alert-warning">Không có nhân viên nào trong phòng ban đã chọn.</div>
    }
}
